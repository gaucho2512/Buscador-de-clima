{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/Juan/Desktop/Buscador-de-clima/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"C:/Users/Juan/Desktop/Buscador-de-clima/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/Juan/Desktop/Buscador-de-clima/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/Juan/Desktop/Buscador-de-clima/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\Juan\\\\Desktop\\\\Buscador-de-clima\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{useState,createContext}from'react';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";var ClimaContext=/*#__PURE__*/createContext();var ClimaProvider=function ClimaProvider(_ref){var children=_ref.children;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),cargando=_useState2[0],setCargando=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),noResultado=_useState4[0],setNoResultado=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),resultado=_useState6[0],setresultado=_useState6[1];var _useState7=useState({ciudad:\"\",pais:\"\"}),_useState8=_slicedToArray(_useState7,2),busqueda=_useState8[0],setBusqueda=_useState8[1];var datosBusqueda=function datosBusqueda(e){setBusqueda(_objectSpread(_objectSpread({},busqueda),{},_defineProperty({},e.target.name,e.target.value)));};var consultarClima=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(datos){var ciudad,pais,appId,url,_resultado,_yield$axios,data,_data$,lat,lon,urlClima,_yield$axios2,clima;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setCargando(true);setNoResultado(false);_context.prev=2;ciudad=datos.ciudad,pais=datos.pais;appId='3313ef7bad42b7737e753840e7e503dc';url=\"http://api.openweathermap.org/geo/1.0/direct?q=\".concat(ciudad,\",\").concat(pais,\"&limit=1&appid=\").concat(appId);_context.next=8;return axios(url);case 8:_resultado=_context.sent;_context.next=11;return axios(url);case 11:_yield$axios=_context.sent;data=_yield$axios.data;_data$=data[0],lat=_data$.lat,lon=_data$.lon;urlClima=\"http://api.openweathermap.org/data/2.5/weather?lat=\".concat(lat,\"&lon=\").concat(lon,\"&appid=\").concat(appId);_context.next=17;return axios(urlClima);case 17:_yield$axios2=_context.sent;clima=_yield$axios2.data;setresultado(clima);_context.next=25;break;case 22:_context.prev=22;_context.t0=_context[\"catch\"](2);setNoResultado('NO HAY RESULTADOS...');case 25:_context.prev=25;setCargando(false);return _context.finish(25);case 28:case\"end\":return _context.stop();}}},_callee,null,[[2,22,25,28]]);}));return function consultarClima(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(ClimaContext.Provider,{value:{busqueda:busqueda,setBusqueda:setBusqueda,datosBusqueda:datosBusqueda,consultarClima:consultarClima,resultado:resultado,cargando:cargando,setCargando:setCargando,noResultado:noResultado},children:children});};export{ClimaProvider};export default ClimaContext;","map":{"version":3,"sources":["C:/Users/Juan/Desktop/Buscador-de-clima/src/context/ClimaProvider.jsx"],"names":["useState","createContext","axios","ClimaContext","ClimaProvider","children","cargando","setCargando","noResultado","setNoResultado","resultado","setresultado","ciudad","pais","busqueda","setBusqueda","datosBusqueda","e","target","name","value","consultarClima","datos","appId","url","data","lat","lon","urlClima","clima"],"mappings":"8nBAAA,OAASA,QAAT,CAAoBC,aAApB,KAAyC,OAAzC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,2CAEA,GAAMC,CAAAA,YAAY,cAAGF,aAAa,EAAlC,CAGA,GAAMG,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,MAAgB,IAAdC,CAAAA,QAAc,MAAdA,QAAc,CAEpC,cAAiCL,QAAQ,CAAC,KAAD,CAAzC,wCAAOM,QAAP,eAAkBC,WAAlB,eACA,eAAyCP,QAAQ,CAAC,EAAD,CAAjD,yCAAQQ,WAAR,eAAsBC,cAAtB,eACA,eAAmCT,QAAQ,CAAC,EAAD,CAA3C,yCAAOU,SAAP,eAAmBC,YAAnB,eAIA,eAAgCX,QAAQ,CAAC,CACjCY,MAAM,CAAE,EADyB,CAEjCC,IAAI,CAAE,EAF2B,CAAD,CAAxC,yCAAOC,QAAP,eAAiBC,WAAjB,eAKA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,CAAD,CAAO,CACvBF,WAAW,gCACND,QADM,wBAERG,CAAC,CAACC,MAAF,CAASC,IAFD,CAESF,CAAC,CAACC,MAAF,CAASE,KAFlB,GAAX,CAIL,CALD,CAOA,GAAMC,CAAAA,cAAc,2FAAG,iBAAOC,KAAP,qNACjBf,WAAW,CAAC,IAAD,CAAX,CACAE,cAAc,CAAC,KAAD,CAAd,CAFiB,gBAKTG,MALS,CAKSU,KALT,CAKTV,MALS,CAKAC,IALA,CAKSS,KALT,CAKAT,IALA,CAMXU,KANW,CAMH,kCANG,CAQXC,GARW,0DAQ6CZ,MAR7C,aAQuDC,IARvD,2BAQ6EU,KAR7E,wBASOrB,CAAAA,KAAK,CAACsB,GAAD,CATZ,QASXd,UATW,sCAWMR,CAAAA,KAAK,CAACsB,GAAD,CAXX,oCAWTC,IAXS,cAWTA,IAXS,QAYKA,IAAI,CAAC,CAAD,CAZT,CAYTC,GAZS,QAYTA,GAZS,CAYHC,GAZG,QAYHA,GAZG,CAcXC,QAdW,8DAcuDF,GAdvD,iBAckEC,GAdlE,mBAc+EJ,KAd/E,yBAgBarB,CAAAA,KAAK,CAAC0B,QAAD,CAhBlB,qCAgBHC,KAhBG,eAgBTJ,IAhBS,CAiBjBd,YAAY,CAACkB,KAAD,CAAZ,CAjBiB,iFAsBjBpB,cAAc,CAAC,sBAAD,CAAd,CAtBiB,yBAwBjBF,WAAW,CAAC,KAAD,CAAX,CAxBiB,sGAAH,kBAAdc,CAAAA,cAAc,6CAApB,CA4BA,mBAEM,KAAC,YAAD,CAAc,QAAd,EACM,KAAK,CAAE,CACLP,QAAQ,CAARA,QADK,CAELC,WAAW,CAAXA,WAFK,CAGLC,aAAa,CAAbA,aAHK,CAILK,cAAc,CAAdA,cAJK,CAKLX,SAAS,CAATA,SALK,CAMLJ,QAAQ,CAARA,QANK,CAOLC,WAAW,CAAXA,WAPK,CAQLC,WAAW,CAAXA,WARK,CADb,UAYIH,QAZJ,EAFN,CAkBD,CAlED,CAoEA,OACED,aADF,EAIA,cAAeD,CAAAA,YAAf","sourcesContent":["import { useState , createContext } from 'react'\r\nimport axios from 'axios'\r\n\r\nconst ClimaContext = createContext()\r\n\r\n\r\nconst ClimaProvider = ({children}) => {\r\n\r\n  const [cargando , setCargando] = useState(false)\r\n  const [ noResultado , setNoResultado ] = useState('')\r\n  const [resultado , setresultado] = useState({\r\n\r\n  })\r\n\r\n  const [busqueda, setBusqueda] = useState({\r\n          ciudad: \"\",\r\n          pais: \"\",\r\n  })\r\n\r\n  const datosBusqueda = (e) => {\r\n        setBusqueda({\r\n          ...busqueda ,\r\n          [e.target.name] : e.target.value\r\n        })\r\n  }\r\n\r\n  const consultarClima = async (datos) => {\r\n        setCargando(true)\r\n        setNoResultado(false)\r\n      try {\r\n\r\n        const { ciudad , pais } = datos\r\n        const appId = '3313ef7bad42b7737e753840e7e503dc'\r\n\r\n        const url = `http://api.openweathermap.org/geo/1.0/direct?q=${ciudad},${pais}&limit=1&appid=${appId}`\r\n        const resultado = await axios(url)\r\n\r\n        const { data } = await axios(url)\r\n        const { lat , lon } = data[0]\r\n\r\n        const urlClima =  `http://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${appId}`\r\n\r\n        const { data: clima } = await axios(urlClima)\r\n        setresultado(clima);\r\n        \r\n\r\n\r\n      } catch (error) {\r\n        setNoResultado('NO HAY RESULTADOS...')\r\n      } finally {\r\n        setCargando(false)\r\n      }\r\n  }\r\n\r\n  return (\r\n\r\n        <ClimaContext.Provider\r\n              value={{\r\n                busqueda,\r\n                setBusqueda,\r\n                datosBusqueda,\r\n                consultarClima,\r\n                resultado,\r\n                cargando,\r\n                setCargando,\r\n                noResultado\r\n              }}\r\n        >\r\n           {children}\r\n        </ClimaContext.Provider>\r\n\r\n  )\r\n}\r\n\r\nexport {\r\n  ClimaProvider\r\n} \r\n\r\nexport default ClimaContext"]},"metadata":{},"sourceType":"module"}